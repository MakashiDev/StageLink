<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Dashboard | StageLink</title>
		<!-- Include Tailwind CSS -->
		<script src="https://cdn.tailwindcss.com"></script>
		<!-- Include Socket.io -->
		<script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
		<!-- Icons -->
		<link
			rel="stylesheet"
			href="https://maxst.icons8.com/vue-static/landings/line-awesome/line-awesome/1.3.0/css/line-awesome.min.css"
		/>
		<link rel="stylesheet" href="/public/css/index.css" />
		<script defer src="/public/js/show.js"></script>
	</head>
	<body class="bg-slate-950 w-screen h-screen">
		<!-- Toolbar -->
		<div
			class="bg-slate-900 md:grid md:grid-cols-3 hidden w-full h-1/5 border-slate-700 md:border-b-[3px]"
			id="toolbar"
		>
			<!-- Show Information -->
			<div class="" id="show-info">
				<div class="h-[136px] grid grid-cols-1 place-content-center">
					<p
						class="font-semibold text-4xl text-center"
						id="show-title"
					>
						Show Title
					</p>
					<p
						class="font-semibold text-xl text-center"
						id="show-elapsed-time"
					>
						00:00:00
					</p>
				</div>
			</div>

			<!-- Cue Buttons -->
			<div
				class="flex place-content-center items-center border-slate-700 md:border-x-[3px]"
				id="cue-buttons"
			>
				<div
					class="md:flex [&_input]:transition-all [&_input]:font-semibold [&_input]:text-xl"
				>
					<input
						value="Stop"
						class="md:w-[5.749vw] md:h-[81px] rounded-l-[24px] bg-red-500 hover:bg-red-400"
						type="button"
						id="stop"
					/>
					<input
						value="Standby"
						class="md:w-[8.149vw] md:h-[81px] bg-amber-500 hover:bg-amber-400"
						type="button"
						id="standby"
					/>
					<input
						value="Go"
						class="md:w-[5.749vw] md:h-[81px] rounded-r-[24px] bg-green-500 hover:bg-green-400"
						type="button"
						id="go"
					/>
				</div>
			</div>

			<!-- Misc Stuff -->
			<div class="" id="misc-info">
				<div class="h-[136px] flex place-content-center items-center">
					<p class="font-semibold text-4xl text-center" id="clock">
						00:00:00 AM/PM
					</p>
				</div>
			</div>
		</div>

		<div class="flex w-full h-4/5" id="container">
			<!-- Cues List -->
			<div
				class="bg-slate-900 hidden md:block h-full w-1/5 border-slate-700 md:border-r-[3px]"
				id="cues-list"
			>
				<div class="flex place-content-center items-center pb-4 pt-2">
					<p class="font-semibold text-4xl text-center">• Cues •</p>
				</div>
				<div class="w-full overflow-y-scroll" id="cues">
					<div
						class="h-[40px] bg-purple-900 border-slate-700 md:border-t-[3px]"
					>
						<i class="las la-lightbulb m-2"></i>Lighting
					</div>
					<div
						class="h-[40px] bg-blue-900 border-slate-700 md:border-t-[3px]"
					>
						<i class="las la-music m-2"></i>Sound
					</div>
					<div
						class="h-[40px] bg-rose-900 border-slate-700 md:border-t-[3px]"
					>
						<i class="las la-lightbulb m-2"></i>Spotlight
					</div>
					<div
						class="h-[40px] bg-green-900 border-slate-700 md:border-t-[3px]"
					>
						<i class="las la-warehouse m-2"></i>Sets
					</div>
				</div>
			</div>

			<!-- Camera Feed -->
			<div class="h-full w-4/5">
				<img
					src="/default_camera_feed"
					class="aspect-[18/10] h-full w-full object-cover"
					alt="camera feed"
					id="camera-feed"
				/>
			</div>

			<!-- Notes Bar (Hidden) -->
			<!-- <div class="bg-slate-900 hidden md:flex absolute ml-[350px] mt-[calc((100vh-136px)-151px)] md:h-[151px] md:w-[calc(100%-350px)] border-slate-700 md:border-t-[3px]" id="notes">
            <div class="h-[75px] w-[200px] flex place-content-center items-center">
                <p class="font-semibold text-4xl text-center">• Notes •</p>
            </div>
        </div> -->
		</div>

		<!-- Socket.io -->
		<script defer>
			const socket = io("http://localhost:5000");

			socket.on("connect", () => {
				console.log("Connected");
				serverStat.innerText = "Connected";
				serverStat.classList.remove("text-red-500");
				serverStat.classList.add("text-green-500");
			});

			socket.on("disconnect", () => {
				console.log("Disconnected");
				serverStat.innerText = "Disconnected";
				serverStat.classList.remove("text-green-500");
				serverStat.classList.add("text-red-500");
				alert("Server Disconnected, please refresh the page.");
			});

			startButton.addEventListener("click", () => {
				socket.emit("start", show_slug);
			});
		</script>

		<!-- Clock/Timer -->
		<script defer>
			const timer = document.getElementById("show-elapsed-time");
			const clock = document.getElementById("clock");
			const serverStat = document.getElementById("serverStat");

			/* Clock */

			function updateClock() {
				const now = new Date();
				const time = now.toLocaleTimeString();
				clock.innerText = time;
			}

			setInterval(updateClock, 1000);

			/* Timer */

			let seconds = 0;
			let minutes = 0;
			let hours = 0;

			function updateTimer() {
				seconds++;
				if (seconds == 60) {
					seconds = 0;
					minutes++;
				}
				if (minutes == 60) {
					minutes = 0;
					hours++;
					hours = `0${hours}`;
				}

				if (seconds.toString().split(``).length == 1) {
					seconds = `0${seconds}`;
				} else {
					seconds = seconds.toString().trimStart();
				}

				if (minutes.toString().split(``).length == 1) {
					minutes = `0${minutes}`;
				} else {
					minutes = minutes.toString().trimStart();
				}

				if (hours.toString().split(``).length == 1) {
					hours = `0${hours}`;
				} else {
					minutes = minutes.toString().trimStart();
				}

				const time = `${hours}:${minutes}:${seconds}`;
				timer.innerText = time;
			}

			setInterval(updateTimer, 1000);
		</script>
	</body>
</html>
